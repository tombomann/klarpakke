<!-- Klarpakke Webflow loader (paste in Project Settings → Custom Code → Footer Code) -->
<!-- Goal: avoid pasting large JS blobs; keep a tiny bootstrap that always loads latest scripts from repo/CDN. -->

<script>
  // 1) Runtime config (anon key is publishable; NEVER put service_role key in client code)
  // Option A: Set config here (fastest)
  window.KLARPAKKE_CONFIG = {
    supabaseUrl: 'https://YOUR_PROJECT_REF.supabase.co',
    supabaseAnonKey: 'YOUR_SUPABASE_ANON_KEY',
    debug: false,
  };

  // 2) Asset base (used for auto-loading optional scripts)
  window.KLARPAKKE_ASSET_BASE = 'https://cdn.jsdelivr.net/gh/tombomann/klarpakke@main/web';

  // 3) Load the site engine + auto-load calculator on /kalkulator
  (function () {
    var base = window.KLARPAKKE_ASSET_BASE;
    // Daily cache-bust (keeps CDN caching effective but ensures updates roll out quickly)
    var v = new Date().toISOString().slice(0, 10);

    function load(src) {
      var s = document.createElement('script');
      s.src = src + '?v=' + encodeURIComponent(v);
      s.defer = true;
      document.head.appendChild(s);
    }

    load(base + '/klarpakke-site.js');

    if (window.location && window.location.pathname && window.location.pathname.indexOf('/kalkulator') !== -1) {
      load(base + '/calculator.js');
    }
  })();
</script>
